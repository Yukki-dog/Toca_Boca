<!DOCTYPE html>
<html lang="ru">
<head>
  <meta charset="UTF-8" />
  <title>–ú–∏–ª–∞—è –∫–≤–∞—Ä—Ç–∏—Ä–∞ —Å –∫–æ–º–Ω–∞—Ç–∞–º–∏</title>
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <script src="https://cdn.tailwindcss.com"></script>
  <style>
    body {
      font-family: 'Comic Sans MS', cursive, sans-serif;
      background: #fce7f3;
      overflow-x: hidden;
      user-select: none;
    }

    #room-container {
      width: 100vw;
      height: 90vh;
      position: relative;
      margin-top: 1rem;
      overflow: hidden;
      border-radius: 1rem;
      box-shadow: 0 8px 24px rgba(0,0,0,0.15);
      background-size: cover;
      background-position: center;
      transition: background-image 0.6s ease;
    }

    .floor {
      position: absolute;
      bottom: 0;
      width: 100%;
      height: 30%;
      transition: background 0.6s ease;
      border-top-left-radius: 1rem;
      border-top-right-radius: 1rem;
      z-index: 0;
    }

    .furniture {
      width: 70px;
      height: 70px;
      position: absolute;
      cursor: grab;
      user-select: none;
      transition: transform 0.2s ease;
      border-radius: 0.5rem;
      box-shadow: 0 2px 6px rgba(0,0,0,0.2);
    }
    .furniture:active {
      cursor: grabbing;
      transform: scale(1.05);
      box-shadow: 0 4px 12px rgba(0,0,0,0.3);
      z-index: 1000;
    }

    .controls {
      display: flex;
      justify-content: center;
      gap: 1rem;
      margin-top: 1rem;
      user-select: none;
    }

    button {
      background: #fff;
      padding: 0.5rem 1.2rem;
      border-radius: 0.75rem;
      box-shadow: 0 2px 6px rgba(0,0,0,0.15);
      font-weight: bold;
      color: #b91c1c;
      transition: background 0.3s ease;
      cursor: pointer;
    }
    button:hover {
      background: #fbcfe8;
    }

    #furniture-panel {
      background: #fff;
      padding: 0.5rem;
      border-radius: 0.75rem;
      box-shadow: 0 2px 8px rgba(0,0,0,0.15);
      display: flex;
      gap: 1rem;
      margin-top: 1rem;
      justify-content: center;
      user-select: none;
    }

    #furniture-panel img {
      width: 60px;
      height: 60px;
      border-radius: 0.5rem;
      box-shadow: 0 2px 5px rgba(0,0,0,0.2);
      cursor: pointer;
      transition: transform 0.3s ease;
    }
    #furniture-panel img:hover {
      transform: scale(1.1);
      box-shadow: 0 4px 10px rgba(0,0,0,0.3);
    }

    .fade-enter {
      opacity: 0;
      transform: translateX(100%);
    }
    .fade-enter-active {
      opacity: 1;
      transform: translateX(0);
      transition: all 0.5s ease;
    }
    .fade-exit {
      opacity: 1;
      transform: translateX(0);
    }
    .fade-exit-active {
      opacity: 0;
      transform: translateX(-100%);
      transition: all 0.5s ease;
    }
  </style>
</head>
<body>

  <h1 class="text-center text-3xl font-bold text-pink-600 mt-4 select-none">–ú–∏–ª–∞—è –∫–≤–∞—Ä—Ç–∏—Ä–∞ —Å –∫–æ–º–Ω–∞—Ç–∞–º–∏ üíñ</h1>

  <div class="controls">
    <button id="left-btn" aria-label="–ü—Ä–µ–¥—ã–¥—É—â–∞—è –∫–æ–º–Ω–∞—Ç–∞">&larr; –ù–∞–∑–∞–¥</button>
    <button id="right-btn" aria-label="–°–ª–µ–¥—É—é—â–∞—è –∫–æ–º–Ω–∞—Ç–∞">–í–ø–µ—Ä—ë–¥ &rarr;</button>
  </div>

  <div id="room-container" aria-live="polite" aria-atomic="true" role="region" tabindex="0">
    <div id="floor" class="floor"></div>
  </div>

  <div id="furniture-panel" aria-label="–ü–∞–Ω–µ–ª—å –º–µ–±–µ–ª–∏" role="region">
    <img src="https://cdn-icons-png.flaticon.com/512/609/609803.png" alt="–î–∏–≤–∞–Ω" title="–î–∏–≤–∞–Ω" data-type="sofa" />
    <img src="https://cdn-icons-png.flaticon.com/512/1046/1046857.png" alt="–ö—Ä–µ—Å–ª–æ" title="–ö—Ä–µ—Å–ª–æ" data-type="armchair" />
    <img src="https://cdn-icons-png.flaticon.com/512/2462/2462719.png" alt="–°—Ç—É–ª" title="–°—Ç—É–ª" data-type="chair" />
    <img src="https://cdn-icons-png.flaticon.com/512/1128/1128551.png" alt="–°—Ç–æ–ª" title="–°—Ç–æ–ª" data-type="table" />
  </div>

  <div class="controls mt-4">
    <label for="wallpaper-select" class="text-pink-700 font-semibold mr-2 select-none">–û–±–æ–∏:</label>
    <select id="wallpaper-select" aria-label="–í—ã–±–æ—Ä –æ–±–æ–µ–≤">
      <option value="wall1">–†–æ–∑–æ–≤—ã–µ —Ü–≤–µ—Ç–æ—á–∫–∏</option>
      <option value="wall2">–ú—è—Ç–Ω—ã–µ –ø–æ–ª–æ—Å—ã</option>
      <option value="wall3">–ì–æ—Ä–æ—à–µ–∫</option>
    </select>

    <label for="floor-select" class="text-pink-700 font-semibold ml-6 mr-2 select-none">–ü–æ–ª:</label>
    <select id="floor-select" aria-label="–í—ã–±–æ—Ä –ø–æ–ª–∞">
      <option value="floor1">–î–µ—Ä–µ–≤–æ —Å–≤–µ—Ç–ª–æ–µ</option>
      <option value="floor2">–ü–∞—Ä–∫–µ—Ç —Ç—ë–º–Ω—ã–π</option>
      <option value="floor3">–ü–ª–∏—Ç–∫–∞ –º—è—Ç–∞</option>
    </select>
  </div>

  <script>
    // –ö–æ–º–Ω–∞—Ç—ã: 3 —à—Ç—É–∫–∏ —Å —Ä–∞–∑–Ω—ã–º–∏ –æ–±–æ—è–º–∏ –∏ –ø–æ–ª–æ–º –ø–æ —É–º–æ–ª—á–∞–Ω–∏—é
    const rooms = [
      { id: 0, wallpaper: 'wall1', floor: 'floor1', furnitures: [] },
      { id: 1, wallpaper: 'wall2', floor: 'floor2', furnitures: [] },
      { id: 2, wallpaper: 'wall3', floor: 'floor3', furnitures: [] },
    ];
    let currentRoom = 0;

    const wallpaperImages = {
      wall1: 'https://i.pinimg.com/originals/ed/aa/0c/edaa0cde2717d70dbf4d6875eb7e0b24.jpg',  // –º–∏–ª—ã–π —Ä–æ–∑–æ–≤—ã–π —Ñ–æ–Ω —Å —Ü–≤–µ—Ç–æ—á–∫–∞–º–∏
      wall2: 'https://i.pinimg.com/originals/56/8e/67/568e6710e1bdbfb4c79e8392ebc7d4e0.jpg',  // –º—è—Ç–Ω—ã–µ –ø–æ–ª–æ—Å—ã
      wall3: 'https://cdn.wallpapersafari.com/11/18/QMJe9X.jpg',                                  // –∑–µ–ª–µ–Ω—ã–π –≥–æ—Ä–æ—à–µ–∫
    };

    const floorImages = {
      floor1: 'https://images.unsplash.com/photo-1505692952044-86409c1412b2?auto=format&fit=crop&w=800&q=80', // —Å–≤–µ—Ç–ª–æ–µ –¥–µ—Ä–µ–≤–æ
      floor2: 'https://images.unsplash.com/photo-1543076447-215ad9ba6924?auto=format&fit=crop&w=800&q=80', // —Ç–µ–º–Ω—ã–π –ø–∞—Ä–∫–µ—Ç
      floor3: 'https://images.unsplash.com/photo-1505751172876-fa1923c5c528?auto=format&fit=crop&w=800&q=80', // –ø–ª–∏—Ç–∫–∞ –º—è—Ç–Ω–∞—è
    };

    const roomContainer = document.getElementById('room-container');
    const floorDiv = document.getElementById('floor');
    const wallpaperSelect = document.getElementById('wallpaper-select');
    const floorSelect = document.getElementById('floor-select');
    const leftBtn = document.getElementById('left-btn');
    const rightBtn = document.getElementById('right-btn');
    const furniturePanel = document.getElementById('furniture-panel');

    // –ó–∞–≥—Ä—É–∂–∞–µ–º –∫–æ–º–Ω–∞—Ç—É
    function loadRoom(index, direction = 0) {
      if (index < 0) index = rooms.length -1;
      if (index >= rooms.length) index = 0;
      currentRoom = index;
      const room = rooms[currentRoom];

      // –ê–Ω–∏–º–∞—Ü–∏—è —Å–º–µ–Ω—ã –∫–æ–º–Ω–∞—Ç—ã (—Å–¥–≤–∏–≥ —Å–ª–µ–≤–∞ –∏–ª–∏ —Å–ø—Ä–∞–≤–∞)
      roomContainer.style.opacity = '0';
      setTimeout(() => {
        roomContainer.style.backgroundImage = `url(${wallpaperImages[room.wallpaper]})`;
        floorDiv.style.backgroundImage = `url(${floorImages[room.floor]})`;
        wallpaperSelect.value = room.wallpaper;
        floorSelect.value = room.floor;

        // –£–¥–∞–ª—è–µ–º —Å—Ç–∞—Ä—É—é –º–µ–±–µ–ª—å
        roomContainer.querySelectorAll('.furniture').forEach(el => el.remove());
        // –î–æ–±–∞–≤–ª—è–µ–º –º–µ–±–µ–ª—å –∫–æ–º–Ω–∞—Ç—ã
        room.furnitures.forEach(furn => {
          const f = createFurnitureElement(furn.type, furn.x, furn.y);
          roomContainer.appendChild(f);
        });

        roomContainer.style.opacity = '1';
      }, 300);
    }

    // –°–æ–∑–¥–∞—Ç—å —ç–ª–µ–º–µ–Ω—Ç –º–µ–±–µ–ª–∏
    function createFurnitureElement(type, x = 50, y = 200) {
      const el = document.createElement('img');
      el.classList.add('furniture');
      el.setAttribute('draggable', 'false');
      el.src = furniturePanel.querySelector(`img[data-type="${type}"]`).src;
      el.alt = type;
      el.style.left = x + 'px';
      el.style.top = y + 'px';

      // Drag and drop –º–µ–±–µ–ª—å
      let offsetX, offsetY;
      el.addEventListener('mousedown', e => {
        offsetX = e.clientX - el.getBoundingClientRect().left;
        offsetY = e.clientY - el.getBoundingClientRect().top;
        el.style.cursor = 'grabbing';

        function onMouseMove(e) {
          el.style.left = (e.clientX - offsetX) + 'px';
          el.style.top = (e.clientY - offsetY) + 'px';
        }

        function onMouseUp(e) {
          document.removeEventListener('mousemove', onMouseMove);
          document.removeEventListener('mouseup', onMouseUp);
          el.style.cursor = 'grab';
          // –°–æ—Ö—Ä–∞–Ω—è–µ–º –ø–æ–∑–∏—Ü–∏—é –≤ —Ç–µ–∫—É—â–µ–π –∫–æ–º–Ω–∞—Ç–µ
          const room = rooms[currentRoom];
          const furn = room.furnitures.find(f => f.el === el);
          if (furn) {
            furn.x = parseInt(el.style.left);
            furn.y = parseInt(el.style.top);
          }
        }

        document.addEventListener('mousemove', onMouseMove);
        document.addEventListener('mouseup', onMouseUp);
      });

      return el;
    }

    // –î–æ–±–∞–≤–∏—Ç—å –º–µ–±–µ–ª—å –≤ –∫–æ–º–Ω–∞—Ç—É –ø—Ä–∏ –∫–ª–∏–∫–µ –ø–æ –ø–∞–Ω–µ–ª–∏
    furniturePanel.addEventListener('click', e => {
      if (e.target.tagName !== 'IMG') return;
      const type = e.target.getAttribute('data-type');
      const room = rooms[currentRoom];
      const newFurn = {type, x: 100, y: 220, el: null};
      room.furnitures.push(newFurn);

      const el = createFurnitureElement(type, newFurn.x, newFurn.y);
      newFurn.el = el;
      roomContainer.appendChild(el);
    });

    wallpaperSelect.addEventListener('change', e => {
      rooms[currentRoom].wallpaper = e.target.value;
      roomContainer.style.backgroundImage = `url(${wallpaperImages[e.target.value]})`;
    });

    floorSelect.addEventListener('change', e => {
      rooms[currentRoom].floor = e.target.value;
      floorDiv.style.backgroundImage = `url(${floorImages[e.target.value]})`;
    });

    leftBtn.addEventListener('click', () => loadRoom(currentRoom - 1));
    rightBtn.addEventListener('click', () => loadRoom(currentRoom + 1));

    // –£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –∫–ª–∞–≤–∏—à–∞–º–∏ ‚Üê –∏ ‚Üí
    window.addEventListener('keydown', e => {
      if (e.key === 'ArrowLeft') {
        loadRoom(currentRoom - 1);
      } else if (e.key === 'ArrowRight') {
        loadRoom(currentRoom + 1);
      }
    });

    // –ó–∞–≥—Ä—É–∑–∫–∞ –ø–µ—Ä–≤–æ–π –∫–æ–º–Ω–∞—Ç—ã –ø—Ä–∏ —Å—Ç–∞—Ä—Ç–µ
    loadRoom(0);
  </script>
</body>
</html>
